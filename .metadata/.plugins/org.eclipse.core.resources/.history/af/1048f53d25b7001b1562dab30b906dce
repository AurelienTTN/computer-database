package com.excylis.controlers;


import java.time.LocalDate;
import java.util.List;

import com.excilys.model.Computer;
import com.excilys.service.Service;
import com.excilys.ui.ChoixUtilisateur;
import com.excilys.ui.ComputerCLI;

public class ComputerCtr {
	

	private static ComputerCtr instance;
	private Service service;
	private ComputerCLI computerCLI;
	private ChoixUtilisateur choixUtilisateur;

	
	private ComputerCtr() {
		this.service = Service.getInstance();
		this.computerCLI = ComputerCLI.getInstance();
		this.choixUtilisateur = ChoixUtilisateur.getInstance();
		
	}
	
	public static ComputerCtr getInstance() {
	       if (instance == null) {
	            instance = new ComputerCtr();
	        }
	        return instance;
	    }
	
	public void afficherListeComputers(){
		List<Computer> computers= this.service.getListComputer();
		this.computerCLI.afficherListeComputers(computers);
	}
	
	public void afficherUnOrdinateur() {
		int id = choixUtilisateur.choixOrdinateur();
		Computer computer = this.service.getOneComputer(id);
		this.computerCLI.afficherComputer(computer);
	}
	
	public void ajouterUnOrdinateur() {
		String name = choixUtilisateur.choixNom();
		LocalDate entree = choixUtilisateur.choixDateEntree();
		LocalDate out = choixUtilisateur.choixDateSortie();
		int id_company = choixUtilisateur.choixIDCompany();
		this.service.ajouterComputer(name, entree, out, id_company);
		
	}
	
	public void majOrdinateur() {
		int id = choixUtilisateur.choixOrdinateur();
		int colonne = choixUtilisateur.choixChampAChanger();
		switch(colonne){
			case 2:{
				String name = choixUtilisateur.choixNom();
				service.changerInfoComputer(id, colonne, name);
				break;
			}
			case 3:{
				LocalDate date_entry = choixUtilisateur.choixDateEntree();
				service.changerInfoComputer(id, colonne, date_entry);
				break;
			}
			case 4:{
				LocalDate date_out = choixUtilisateur.choixDateSortie();
				service.changerInfoComputer(id, colonne, date_out);
				break;
			}
			case 5:{
				int id_comp = choixUtilisateur.choixIDCompany();
				service.changerInfoComputer(id, colonne, id_comp);
				break;
			}
		}	
	}
	
	public void effacerOrdinateur() {
		int id = choixUtilisateur.choixOrdinateur();
		service.effacerComputer(id);
	}
	
	public void afficherOrdinateurParPages() {
		int max_ordinateur = this.service.getNombreTotalComputer();
		int id = choixUtilisateur.choixMenuPage();
		
	}
	
	
	

}
